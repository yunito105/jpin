{"openapi":"3.1.0","info":{"title":"店舗ご注文システム API","description":"実店舗で使用する注文管理システムのREST API仕様書。\n\n## 概要\n- テーブル単位での注文管理\n- メニュー項目の参照\n- 注文ステータスのライフサイクル管理\n\n## アーキテクチャ\nヘキサゴナルアーキテクチャ + 簡易CQRS を採用。\n\n## ステータス遷移\n```\nPLACED → PREPARING → READY → SERVED\n  ↓         ↓\nCANCELLED  CANCELLED\n```\n","contact":{"name":"開発チーム","email":"dev@example.com"},"version":"1.0.0"},"servers":[{"url":"http://localhost:8080","description":"ローカル開発環境"}],"tags":[{"name":"メニューAPI","description":"メニュー項目の参照を行うAPI"},{"name":"注文API","description":"注文の作成・取得・ステータス管理を行うAPI"}],"paths":{"/api/orders":{"get":{"tags":["注文API"],"summary":"注文一覧を取得する","description":"ステータスやテーブル番号で絞り込み可能な注文一覧を取得する","operationId":"getOrders","parameters":[{"name":"status","in":"query","description":"ステータスフィルタ","required":false,"schema":{"type":"string"},"example":"PLACED"},{"name":"tableNumber","in":"query","description":"テーブル番号フィルタ","required":false,"schema":{"type":"integer","format":"int32"},"example":5}],"responses":{"200":{"description":"取得成功","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/OrderSummary"}}}}}}},"post":{"tags":["注文API"],"summary":"注文を作成する","description":"テーブル番号とメニュー項目を指定して新しい注文を作成する","operationId":"placeOrder","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PlaceOrderRequest"}}},"required":true},"responses":{"201":{"description":"注文作成成功","content":{"*/*":{"schema":{"type":"object","additionalProperties":{"type":"string"}}}}},"400":{"description":"リクエスト不正（メニュー不存在・提供不可等）","content":{"*/*":{"schema":{"type":"object","additionalProperties":{"type":"string"}}}}}}}},"/api/orders/{orderId}/cancel":{"post":{"tags":["注文API"],"summary":"注文をキャンセルする","description":"指定された注文をキャンセルする","operationId":"cancelOrder","parameters":[{"name":"orderId","in":"path","description":"注文ID","required":true,"schema":{"type":"string"}}],"responses":{"204":{"description":"キャンセル成功"},"400":{"description":"キャンセルできないステータス"},"404":{"description":"注文が見つからない"}}}},"/api/orders/{orderId}/status":{"patch":{"tags":["注文API"],"summary":"注文ステータスを更新する","description":"注文のステータスを次の段階に遷移させる","operationId":"updateOrderStatus","parameters":[{"name":"orderId","in":"path","description":"注文ID","required":true,"schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateOrderStatusRequest"}}},"required":true},"responses":{"204":{"description":"更新成功"},"400":{"description":"不正なステータス遷移"},"404":{"description":"注文が見つからない"}}}},"/api/orders/{orderId}":{"get":{"tags":["注文API"],"summary":"注文詳細を取得する","description":"指定された注文IDの詳細情報を取得する","operationId":"getOrderDetail","parameters":[{"name":"orderId","in":"path","description":"注文ID","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"取得成功","content":{"*/*":{"schema":{"$ref":"#/components/schemas/OrderDetailView"}}}},"404":{"description":"注文が見つからない","content":{"*/*":{"schema":{"$ref":"#/components/schemas/OrderDetailView"}}}}}}},"/api/menu":{"get":{"tags":["メニューAPI"],"summary":"メニュー一覧を取得する","description":"カテゴリで絞り込み可能なメニュー項目一覧を取得する","operationId":"getMenuItems","parameters":[{"name":"category","in":"query","description":"カテゴリフィルタ","required":false,"schema":{"type":"string"},"example":"MAIN_COURSE"}],"responses":{"200":{"description":"取得成功","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/MenuItemView"}}}}}}}},"/api/menu/available":{"get":{"tags":["メニューAPI"],"summary":"提供可能なメニュー一覧を取得する","description":"現在注文可能なメニュー項目のみを取得する。注文画面で使用。","operationId":"getAvailableMenuItems","responses":{"200":{"description":"取得成功","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/MenuItemView"}}}}}}}}},"components":{"schemas":{"OrderItemRequest":{"type":"object","description":"注文明細リクエスト","properties":{"menuItemId":{"type":"string","description":"メニュー項目ID","example":"main-001","minLength":1},"quantity":{"type":"integer","format":"int32","description":"数量","example":2,"minimum":1}},"required":["menuItemId","quantity"]},"PlaceOrderRequest":{"type":"object","description":"注文作成リクエスト","properties":{"tableNumber":{"type":"integer","format":"int32","description":"テーブル番号","example":5,"minimum":1},"items":{"type":"array","description":"注文明細リスト","items":{"$ref":"#/components/schemas/OrderItemRequest"},"minItems":1}},"required":["tableNumber"]},"UpdateOrderStatusRequest":{"type":"object","description":"注文ステータス更新リクエスト","properties":{"status":{"type":"string","description":"新しいステータス","enum":["PLACED","PREPARING","READY","SERVED","CANCELLED"],"example":"PREPARING","minLength":1}},"required":["status"]},"OrderSummary":{"type":"object","properties":{"orderId":{"type":"string"},"tableNumber":{"type":"integer","format":"int32"},"status":{"type":"string"},"statusDisplayName":{"type":"string"},"totalAmount":{"type":"number"},"totalAmountWithTax":{"type":"number"},"itemCount":{"type":"integer","format":"int32"},"orderedAt":{"type":"string","format":"date-time"}}},"OrderDetailView":{"type":"object","properties":{"orderId":{"type":"string"},"tableNumber":{"type":"integer","format":"int32"},"status":{"type":"string"},"statusDisplayName":{"type":"string"},"items":{"type":"array","items":{"$ref":"#/components/schemas/OrderItemView"}},"totalAmount":{"type":"number"},"totalAmountWithTax":{"type":"number"},"orderedAt":{"type":"string","format":"date-time"}}},"OrderItemView":{"type":"object","properties":{"menuItemId":{"type":"string"},"menuItemName":{"type":"string"},"unitPrice":{"type":"number"},"quantity":{"type":"integer","format":"int32"},"subtotal":{"type":"number"}}},"MenuItemView":{"type":"object","properties":{"menuItemId":{"type":"string"},"name":{"type":"string"},"price":{"type":"number"},"priceWithTax":{"type":"number"},"category":{"type":"string"},"categoryDisplayName":{"type":"string"},"available":{"type":"boolean"}}}}}}